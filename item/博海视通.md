# 博海视通

## 环境待遇

- 试用期不买社保，不买公积金

- 转正后买社保，不买公积金

- 公司有自带的台式电脑，不需要自带笔记本

- 目前主要架构为 springboot + mybatis

- 环境还可以，19年新成立的公司，目前做小程序，未来规划做APP

##  面试提问

#### 读写分离如何操作?

1.什么是读写分离<br>

> 读写分离其实就是将数据库分为主从数据库，一个主数据库用于写操作，多个从数据库用于读操作。

2.如何保证主从数据库数据的一致性?

> - ## 保证Mysql（Master端）日志和数据的统一性，处理宕机、断电等异常情况。 ##
>
> 以下配置
>
> ```mysql
> #以下配置保证bin-log写入后事务提交流程会变成两阶段提交，这里的两阶段提交并不涉及分布式事务，mysql把它称之为内部xa事务
> innodb_support_xa=ON
> #以下配置能够保证不论是MySQL Crash 还是OS Crash 或者是主机断电重启都不会丢失数据
> innodb_doublewrite=ON
> #以下配置保证每次事务提交后，都能实时刷新到磁盘中，尤其是确保每次事务对应的binlog都能及时刷新到磁盘中，只要有了binlog，InnoDB就有办法做数据恢复，不至于导致主从复制的数据丢失
> innodb_flush_log_at_trx_commit = 1
> sync_binlog = 1
> ```
>
> - ## 保证MySQL（slave端）同步时和master端保持一致 ##
>
>   >1.半同步复制（Mysql5.5 之后支持）
>   >
>   >简单的说，就是主库在进行增删改操作的时候,会等从库复制了并且通知了主库,才会把这个操作叫做成功.这样能轻易的保证数据的一致性,但是缺点就是慢.
>   >
>   >2.数据库中间件
>   >
>   >假设有数据库中间件，那么所有的数据库请求都走数据库中间件，关于写的操作路由到主库，关于读的操作路由到写库，然后我们在中间件中记录写库操作的一个key，设置时间为1s，给从库复制数据的时间，当在这1s内，有读操作请求时，我们就路由到主库。
>   >
>   >

3.读写分离主要用来解决什么问题？

> 在大部分的互联网项目中，其实往往都是读操作多余写操作的N倍，当读操作多了之后，数据库的读取就首先成为了我们数据库的瓶颈，这个时候，我们想提升数据库的性能，就可以使用读写分离。

4.读写分离是必须的嘛？有可替代方式嘛？

> 可以使用缓存，当读写分离和缓存二选一的时候，肯定是优先选择缓存。因为缓存的上手成本低，缓存的使用成本比一个库低，开发也容易。那么缓存是不是没有问题呢？肯定也是有的，如果当缓存崩了，那么所有的压力又会转移到数据库，到时候我们的数据库肯定也崩。

5.数据库的常见瓶颈是什么？

> 数据库的常见瓶颈是数据容量的瓶颈，如有些数据是一直在增加，而且历史记录也会保存的数据，比如说订单数据。那么怎么解决呢？可以使用数据库水平切分，何为数据库水平切分？就是通过某个算法，将数据库水平切割，切割下来的数据没有重复，但是组合在一起又是完成的数据。

6.读写分离如何实现？

> 设置多个数据源
>
> - Spring AOP 切面实现，当方法为 selectxxx、findxxx、isxxx等走主数据源，其他的则走写数据源 [参考链接](https://www.cnblogs.com/tilamisu007/p/9360664.html)
> - 中间件实现读写分离 [参考链接](https://www.cnblogs.com/tilamisu007/p/9360664.html)
> - [mysql 数据库配置主从数据库](https://blog.csdn.net/m0_37997046/article/details/83793110)



#### 对于高并发，有何理解？如何设计？

> 1.在此之前，先弄懂一个问题，何为高并发，高并发为何牛逼？
>
> 高并发可以这么理解，就是超级多个用户同时访问，从系统层面就是我们的系统一开始是有数据库连接的，而我们系统刚开始没有考虑到高并发的话，等用户数一上来，达到每秒2000~3000的时候，我们的数据库基本就完了，系统扛不住压力，就直接崩了。
>
> 2.如果没有做过高并发，可先看以下图示
>
> ![](https://img2018.cnblogs.com/blog/1415794/201905/1415794-20190525230208454-1070742975.png)
>
> - 系统拆分，将一个系统拆分为多个子系统，目前微服务思想可以完美阐述
> - 缓存，必须得用缓存，在高并发场景下，基本都是读多写少，完全可以在数据库和缓存中都写一份，然后大量读直接走缓存。
> - MQ，必须得用消息队列，如果大量的并发请求要走数据库，一个业务操作要搞数据库几十次，那这个还怎么搞，直接将请求塞队列中排队，然后控制在mysql范围内，让他在后台慢慢进行操作。
> - 分库分表，可能到最后，数据库还是扛不住高并发的要求，那么此时就将一个数据库，拆分为多个库，多个库用来扛住并发。
> - 读写分离，其实多数的时候，数据库压力还是来自读操作，此时将数据库主从分离，多个读写库来扛住读操作请求
> - Elasticsearch，ES 是分布式的，分布式天然就可以支撑高并发，动不动就可以扩容机器，来支撑并发要求。

#### 公司前端给后端的数据，前端给后端的数据，数据加密用什么？

> ![](https://img2018.cnblogs.com/blog/1353055/201905/1353055-20190523171207110-431742561.png)
>
> 翻译过来就是：
>
> 前、后端各自生成自己的RSA秘钥对（公钥、私钥），然后交换公钥（后端给前端的是正常的明文公钥，前端给后端的是用后端公钥加密后的密文公钥；PS：其实我觉得直接交换两个明文公钥就行了），后端生成AES的明文key，用明文key进行AES加密得到密文数据，用前端的公钥进行RSA加密得到密文key，API交互时并将密文数据与密文key进行传输，前端用自己的私钥进行RAS解密的到明文key，用明文key进行AES解密得到明文数据；前端给后端发送数据时同理，这样一来，传输的数据都是密文，且只有秘钥才能解密
>
> 具体代码参考链接为：https://www.cnblogs.com/huanzi-qch/p/10913636.html



#### 对称加密和非对称加密的区别是什么？

> 常用的  AES 对称加密   RSA 不对称加密
>
> ```text
> l 对称加密算法
> 
>   对称加密算法是应用较早的加密算法，技术成熟。在对称加密算法中，数据发信方将明文（原始数据）和加密密钥一起经过特殊加密算法处理后，使其变成复杂的加密密文发送出去。收信方收到密文后，若想解读原文，则需要使用加密用过的密钥及相同算法的逆算法对密文进行解密，才能使其恢复成可读明文。在对称加密算法中，使用的密钥只有一个，发收信双方都使用这个密钥对数据进行加密和解密，这就要求解密方事先必须知道加密密钥。对称加密算法的特点是算法公开、计算量小、加密速度快、加密效率高。不足之处是，交易双方都使用同样钥匙，安全性得不到保证。此外，每对用户每次使用对称加密算法时，都需要使用其他人不知道的惟一钥匙，这会使得发收信双方所拥有的钥匙数量成几何级数增长，密钥管理成为用户的负担。对称加密算法在分布式网络系统上使用较为困难，主要是因为密钥管理困难，使用成本较高。在计算机专网系统中广泛使用的对称加密算法有DES、IDEA和AES。
>   
> 2 不对称加密
> 
> 不对称加密算法使用两把完全不同但又是完全匹配的一对钥匙—公钥和私钥。在使用不对称加密算法加密文件时，只有使用匹配的一对公钥和私钥，才能完成对明文的加密和解密过程。加密明文时采用公钥加密，解密密文时使用私钥才能完成，而且发信方（加密者）知道收信方的公钥，只有收信方（解密者）才是唯一知道自己私钥的人。不对称加密算法的基本原理是，如果发信方想发送只有收信方才能解读的加密信息，发信方必须首先知道收信方的公钥，然后利用收信方的公钥来加密原文；收信方收到加密密文后，使用自己的私钥才能解密密文。显然，采用不对称加密算法，收发信双方在通信之前，收信方必须将自己早已随机生成的公钥送给发信方，而自己保留私钥。由于不对称算法拥有两个密钥，因而特别适用于分布式系统中的数据加密。广泛应用的不对称加密算法有RSA算法和美国国家标准局提出的DSA。以不对称加密算法为基础的加密技术应用非常广泛。
> ```

> 口水话翻译就是  对称加密  双方都是使用一个密匙，此密匙用来加密和解密密文，注意 密匙万万不能泄露，不然就没有任何意义。 而非对称加密是在发送信息之前就知道收信方的公匙，然后用收信方的公匙来加密信息，形成密文，收信方用自己的密匙来解密密文。

#### String StringBuffer StringBuilder 区别

![](https://img-blog.csdn.net/20180411092400746?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTEwMTE3Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



#### 锁是什么？锁有多少种类型？

#### sychcnized 和 lock 锁

#### 线程是什么？线程的状态有哪些？

#### mysql的存储过程，触发器

#### 存储过程的优缺点？